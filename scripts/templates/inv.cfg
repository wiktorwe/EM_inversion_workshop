# MPI 2d EM TE inversion configuration file

# Domain decomposition parameter
ndomain0 = "1"; # Number of domains along x direction to split the model into
ndomain1 = "1"; # Number of domains along z direction to split the model into

# Modelling parameters
order = "2"; # Order of finite difference stencil
lpml = "10"; # Size of pml absorbing boundary (should be larger than order + 5 )
snapinc = "1"; # Snap interval in multiples of modelling interval
apertx = "60"; # Controls local model size: >0 fixed aperture :: 0 twice max offset :: <0 covers src/rec with padding
source_type = "3"; # 1 - EY; 3 - HX; 5 - HZ
receiver_type = "3,5"; # 1 - EY; 3 - HX; 5 - HZ (comma-separated for multiple, e.g. 1,3 or EY,HX)
pml_kmax = "28.35589468718386"; # PML Kmax parameter
pml_smax = "5118.462271590878"; # PML Smax parameter
pml_amax = "1641.117633701651"; # PML Amax parameter

# Checkpointing parameters
snapmethod = "1"; # 0- Full checkpointing; 1- Optimal checkpointing
nsnaps = "31";
incore = "true";

#Inversion parameters
misfit_type = "0"; # 0- Difference; 1- Correlation; 2- Amplitude Ratio; 3- Phase Difference
target_frequency = "2e3"; # Target frequency in Hz for spectral misfits (types 2 and 3)
reference_trace_index = "0"; # Reference trace index for ratio/difference misfits (types 2 and 3)
dataweight = "true";
Dataweightfile = "weight.rss";
modmute = "false"; # Mute model gradient and updates
Modmutefile = "modmute.rss"; # File with model mute weights
srcmute = "false"; # Mute source gradient
Srcmutefile = "srcmute.rss"; # File with source mute weights
max_linesearch = "5"; # maximum number of linesearches
max_iterations = "20"; # maximum number of iterations
optmethod = "1"; # 1-L-BFGS; 2-CG_FR; 3-STEEPEST DESCENT; 4-CG_PR
linesearch = "5"; # 1-Decrease; 2-Armijo; 3-Wolfe; 4-Strong Wolfe; 5-MoreThuente
update_ep = "false"; # Update ep
update_sg = "true"; # Update sg
update_source = "false"; # Update source

# Diagonal scaling parameters
kep = "1.0";
ksg = "1.0";
ksource = "1.0";

#Parameterisation
paramtype = "1"; # 0- grid; 1- B-spline;
dtx = "6.0"; # knot sampling in B-spline
dtz = "6.0"; # knot sampling in B-spline

#Regularisation
tv_epregalpha = "0.0";
tv_sgregalpha = "0.0";
tik_epregalpha = "0.0";
tik_sgregalpha = "0.0";

# Input files
Ep = "ep.rss";
Sg = "sg0.rss";
Wavelet = "Wav2d.rss";
Snapfile = "Local/EMsnap";
Recordfile_HX = "Hx_data.rss"; # Record file for HX field (required if receiver_type includes HX)
Recordfile_HZ = "Hz_data.rss"; # Record file for HZ field (required if receiver_type includes HZ)
